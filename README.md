![Polyline: Polyline encoding/decoding in Swift](https://raw.githubusercontent.com/raphaelmor/Polyline/assets/polyline.png)

[![Build Status](https://travis-ci.org/raphaelmor/Polyline.svg?branch=master)](https://travis-ci.org/raphaelmor/Polyline)

Polyline encoder / decoder in Swift

## Features

- Encode a `CLLocationCoordinate2D` array to a polyline
- Decode a polyline to an Array of `CLLocationCoordinate2D`
- Encode a `CLLocation` array to a polyline
- Decode a polyline to an Array of `CLLocation`
- Encode/Decode associated levels (optional)
- 100% Unit Test Coverage
- Complete Documentation

### Planned for 1.0.0 Release

- Convert to `MKPolyline`
- Example project

### Planned for future releases 

- Convert to `GMSPolyline`
- Filter locations available at a specific level

### Planned when support is available :

- Distribute as a [CocoaPod](http://cocoapods.org)
- Continuous integration with [Travis CI](http://travis-ci.org)
- Code Coverage with [Coveralls](https://coveralls.io)


## Requirements

- Xcode 6.0.1
- iOS 7.0+ / Mac OS X 10.9+

---

## Usage

### Polyline Encoding

Using `CLLocationCoordinate2D` (recommended) :
```swift
let coordinates = [CLLocationCoordinate2D(latitude: 40.2349727, longitude: -3.7707443),
CLLocationCoordinate2D(latitude: 44.3377999, longitude: 1.2112933)]

let polyline = Polyline(coordinates: coordinates)
let encodedPolyline : String = polyline.encodedPolyline
```

Using `CLLocation` :

```swift
let locations = [CLLocation(latitude: 40.2349727, longitude: -3.7707443),
CLLocation(latitude: 44.3377999, longitude: 1.2112933)]

let polyline = Polyline(locations: locations)
let encodedPolyline : String = polyline.encodedPolyline
```

You can specify levels too : 

```swift
let levels : [UInt32] = [0,1,2,255]

let polyline = Polyline(coordinates: coordinates, levels: levels)
let encodedLevels : String = polyline.encodedLevels

```

### Polyline Decoding

You can decode to `CLLocationCoordinate2D` (recommended) :

```swift
let polyline = Polyline(encodedPolyline: "qkqtFbn_Vui`Xu`l]")
let decodedCoordinates : Array<CLLocationCoordinate2D>? = polyline.coordinates
```

You can also decode to `CLLocation` :

```swift
let polyline = Polyline(encodedPolyline: "qkqtFbn_Vui`Xu`l]")
let decodedLocations : Array<CLLocation>? = polyline.locations
```

You can decode levels too :

```swift
let polyline = Polyline(encodedPolyline: "qkqtFbn_Vui`Xu`l]", encodedLevels: "BA")
let decodedLevels : Array<UInt32>? = polyline.levels
```
        
### Note
This library tries to have consistent results with polylines generated by the [Google Maps iOS SDK](https://developers.google.com/maps/documentation/ios/).
The online tool for [encoding polylines](https://developers.google.com/maps/documentation/utilities/polylineutility) has some minor inconsistencies regarding rounding (for example, 0.000015 is rounded to 0.00002 for latitudes, but 0.00001 for longitudes).

### Creator

- [Raphael Mor](http://github.com/raphaelmor) ([@raphaelmor](https://twitter.com/raphaelmor))

## License

Polyline is released under an MIT license. See LICENSE for more information.
